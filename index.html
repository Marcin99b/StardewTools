<head>
  <meta charset="UTF-8" />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
    crossorigin="anonymous"
  />
</head>

<body>
  <div class="container" style="width: 30rem">
    <br />
    <br />
    <div class="form-group">
      <label>Cena za zbiór</label>
      <input type="number" class="form-control" onkeyup="tryRecalculate()" id="pricePerHarvest" />
    </div>
    <div class="form-group">
      <label>Ilość zbiorów</label>
      <input type="number" class="form-control" onkeyup="tryRecalculate()" id="harvestsQuantity" />
    </div>

    <div class="form-group">
      <label>Koszt zakupu nasiona/sadzonki</label>
      <input type="number" class="form-control" onkeyup="tryRecalculate()" id="seedsPrice" />
    </div>

    <div class="form-group">
      <label>Po ilu dniach jest pierwszy zbiór</label>
      <input type="number" class="form-control" onkeyup="tryRecalculate()" id="daysToFirstHarvest" />
    </div>

    <div class="form-group">
      <label>Co ile dni jest każdy kolejny zbiór (wpisz 0 jeśli nie ma)</label>
      <input type="number" class="form-control" onkeyup="tryRecalculate()" id="daysToNextHarvests" />
    </div>
    <br />
    <br />
    <div class="card border mb-3">
      <div class="card-header">Ilość dni do ostatniego zbioru</div>
      <div class="card-body text-primary">
        <h2 class="card-title text-center" id="daysToLatestHarvest"></h2>
      </div>
    </div>
    <div class="card border mb-3">
      <div class="card-header">Przychód za wszystkie zbiory łącznie</div>
      <div class="card-body text-primary">
        <h2 class="card-title text-center" id="incomePerPlant"></h2>
      </div>
    </div>
    <div class="card border mb-3">
      <div class="card-header">Dochód za wszystkie zbiory łącznie</div>
      <div class="card-body text-primary">
        <h2 class="card-title text-center" id="profitPerPlant"></h2>
      </div>
    </div>
    <div class="card border mb-3">
      <div class="card-header">Przychód dzienny</div>
      <div class="card-body text-primary">
        <h2 class="card-title text-center" id="incomePerDay"></h2>
      </div>
    </div>
    <div class="card border mb-3">
      <div class="card-header">Dochód dzienny</div>
      <div class="card-body text-primary">
        <h2 class="card-title text-center" id="profitPerDay"></h2>
      </div>
    </div>
  </div>

  <script>
    const calculateProfitPerPlant = (
      pricePerHarvest,
      harvestsQuantity,
      seedsPrice,
      daysToFirstHarvest,
      daysToNextHarvests
    ) => {
      const incomePerPlant = pricePerHarvest * harvestsQuantity;
      const profitPerPlant = incomePerPlant - seedsPrice;
      const daysToLatestHarvest = 13 + (harvestsQuantity - 1) * daysToNextHarvests;
      const incomePerDay = incomePerPlant / daysToLatestHarvest;
      const profitPerDay = profitPerPlant / daysToLatestHarvest;
      return { daysToLatestHarvest, incomePerPlant, profitPerPlant, incomePerDay, profitPerDay };
    };

    const tryRecalculate = () => {
      const pricePerHarvest = parseInt(document.getElementById("pricePerHarvest").value);
      const harvestsQuantity = parseInt(document.getElementById("harvestsQuantity").value);
      const seedsPrice = parseInt(document.getElementById("seedsPrice").value);
      const daysToFirstHarvest = parseInt(document.getElementById("daysToFirstHarvest").value);
      const daysToNextHarvests = parseInt(document.getElementById("daysToNextHarvests").value);

      const result = calculateProfitPerPlant(
        pricePerHarvest,
        harvestsQuantity,
        seedsPrice,
        daysToFirstHarvest,
        daysToNextHarvests
      );

      document.getElementById("daysToLatestHarvest").innerText = result.daysToLatestHarvest;
      document.getElementById("incomePerPlant").innerText = result.incomePerPlant;
      document.getElementById("profitPerPlant").innerText = result.profitPerPlant;
      document.getElementById("incomePerDay").innerText = result.incomePerDay;
      document.getElementById("profitPerDay").innerText = result.profitPerDay;
    };
  </script>
</body>
